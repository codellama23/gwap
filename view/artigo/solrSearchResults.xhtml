<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:p4s="http://play4science.org/facelets"
    template="layout/template.xhtml">

    <ui:define name="body">
		<div id="related">
			<ui:include src="layout/logo.xhtml" />
			<ui:include src="layout/menu.xhtml" />
		</div>

		<div id="content">
			<div class="images">
				<h:outputText value="#{messages['resourceSearch.noResults']}" rendered="#{solrSearchBean.emptyResult}"/>
				<h:form>
					<p4s:pagination viewId="/solrSearchResults.xhtml" style="margin:0 0 10px 0;"/>
					<rich:dataTable id="resultsList"
					               value="#{solrSearchBean.results}"
					               var="_doc"
					               rendered="#{!solrSearchBean.emptyResult}"
					               columnClasses="noBorder"
					               style="border: none; "
					               >
					    <rich:column>
					    	<ui:include src="/widget/tagCloudOnly.xhtml">
					    		<ui:param name="tagCloud" value="#{tagCloudBean.getTagCloudForSearchResultList(_doc.getFieldValue('id'))}" />
					    	</ui:include>
					    </rich:column>
					    <rich:column styleClass="resultListImage">
						<s:link view="/solrSearchResultsShowSingle.xhtml" propagation="join">
							<h:graphicImage value="#{imageAccessBean.getInstance().getResourceUrl(_doc.getFieldValue('imagepath'))}"
											alt=""
											height="150px" />
							<f:param name="resultNumber" value="#{solrSearchBean.results.indexOf(_doc)}"/>
							<f:param name="queryString" value="#{solrSearchBean.queryString}"/>
						</s:link>
					    </rich:column>
					    <rich:column width="300px">
							<dt><h:outputText value="#{messages['image.artist']}" /></dt>
							<dd><h:outputText value="#{empty(_doc.getFieldValue('artist')) ? messages['image.artist.anonymous'] : _doc.getFieldValue('artist')}"/>
							</dd>
							<dt><h:outputText value="#{messages['image.title']}" /></dt>
							<dd><h:outputText value="#{empty(_doc.getFieldValue('title')) ? messages['image.title.unknown'] : _doc.getFieldValue('title')[0]}" />
							</dd>
							<dt><h:outputText value="#{messages['image.location']}" /></dt>
							<dd>
								<h:outputText value="#{_doc.getFieldValue('location')} / #{_doc.getFieldValue('institution')}" rendered="#{!empty(_doc.getFieldValue('location')) and !empty(_doc.getFieldValue('institution'))}"/>
								<h:outputText value="#{_doc.getFieldValue('location')}" rendered="#{!empty(_doc.getFieldValue('location')) and empty(_doc.getFieldValue('institution'))}"/>
								<h:outputText value="#{_doc.getFieldValue('institution')}" rendered="#{empty(_doc.getFieldValue('location')) and !empty(_doc.getFieldValue('institution'))}"/>
								<h:outputText value="#{messages['image.location.unknown']}" rendered="#{empty(_doc.getFieldValue('location')) and empty(_doc.getFieldValue('institution'))}"/>
							</dd>
							<dt><h:outputText value="#{messages['image.dateCreated']}" /></dt>
							<dd><h:outputText value="#{empty(_doc.getFieldValue('institution')) ? messages['image.dateCreated.unknown'] : _doc.getFieldValue('datecreated')}" />
							</dd>
					    </rich:column>
					</rich:dataTable>
					<p4s:pagination viewId="/solrSearchResults.xhtml" style="margin:10px 0 0 0;"/>
				</h:form>
			</div>
		</div>
		
        <br class="clear" />
    </ui:define>
</ui:composition>
